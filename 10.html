<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10th Grade Rankings - BHS Baddies</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <h1><a href="index.html">BHS Baddies</a></h1>
  <nav>
    <a href="9.html">9th</a>
    <a href="10.html">10th</a>
    <a href="11.html">11th</a>
    <a href="12.html">12th</a>
    <a href="create.html">Create Your Ranking</a>
  </nav>
</header>

<main>
  <h2>10th Grade Rankings</h2>
  <div id="rankingsContainer">Loading...</div>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, query, where, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCzT0n2tF_E8p5amHHyPErhbe0lOMlP7us",
  authDomain: "bhsbaddies.firebaseapp.com",
  projectId: "bhsbaddies",
  storageBucket: "bhsbaddies.firebasestorage.app",
  messagingSenderId: "199970593259",
  appId: "1:199970593259:web:30f05fb927f92206c161ae"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const rankingsRef = collection(db, "rankings");
const q = query(rankingsRef, where("grade", "==", "10"), orderBy("timestamp", "desc"));

getDocs(q)
  .then(snapshot => {
    const container = document.getElementById("rankingsContainer");
    container.innerHTML = "";
    snapshot.forEach(doc => {
      const data = doc.data();
      const div = document.createElement("div");
      div.className = "ranking-card";
      div.innerHTML = `
        <h3>${data.name}'s Rankings</h3>
        <ol>${data.players.map(p => `<li>${p}</li>`).join("")}</ol>
        <p>${data.comment || ""}</p>
      `;
      container.appendChild(div);
    });
  })
  .catch(err => {
    console.error(err);
    document.getElementById("rankingsContainer").innerText = "Error loading rankings";
  });
</script>
</body>
</html>
